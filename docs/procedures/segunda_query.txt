--de la tabla de subsidios:
--	si el parametro que indica si tiene RUC está en '0' (está vacío), entonces evitar la compra -> ir a una excepcion
			
--	cuando el parametro que indica si tiene RUC es distinto de '0', se hace un INSERT a la tabla subsidios ( donde pondrá el id_cliente)


create or replace procedure Comprar_Marca
		(id_cliente_ing varchar2 , indica_RUC INTEGER, latitud_ing NUMERIC , longitud_ing NUMERIC , dir_local_ing VARCHAR) IS

	
	no_hay_RUC EXCEPTION;
	
	BEGIN
		
		IF indica_RUC = 0 :
			RAISE no_hay_RUC;
		
		ELSE
			INSERT INTO
				SUBSIDIOS (LATITUD, LONGITUD, CLIENTE_ID, DIRECCION_LOCAL)
				VALUES (latitud_ing, longitud_ing, id_cliente_ing, dir_local_ing);
		
	EXCEPTION --aquí comienzan los manejadores de error
		
		WHEN no_hay_RUC THEN
			dbms_output.put_line('El cliente que desee comprar el subsidio necesita de un RUC.');
				ROLLBACK;

		WHEN OTHERS THEN
			dbms_output.put_line('Se desconoce el error.');
				ROLLBACK;

END Comprar_Marca;	
		
-- preguntas:
-- esta tabla subsidios permite a un cliente con RUC tener varios subsidios?
-- habrán dos registros con el mismo cliente pero con distintos puntos de LONGITUD y LATITUD entonces? 